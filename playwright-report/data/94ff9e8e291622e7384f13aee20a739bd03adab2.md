# Test info

- Name: Asset Upload Flow >> should upload image assets successfully
- Location: /Users/thomasdowuona-hyde/AIRWAVE_0525_CODEX/tests/e2e/asset-upload.test.ts:5:7

# Error details

```
TimeoutError: locator.click: Timeout 30000ms exceeded.
Call log:
  - waiting for locator('[data-testid="speed-dial"]')
    - locator resolved to <div role="presentation" data-testid="speed-dial" class="MuiSpeedDial-root MuiSpeedDial-directionUp css-myd0-MuiSpeedDial-root">…</div>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <nextjs-portal></nextjs-portal> intercepts pointer events
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <nextjs-portal></nextjs-portal> intercepts pointer events
    - retrying click action
      - waiting 100ms
    58 × waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <nextjs-portal></nextjs-portal> intercepts pointer events
     - retrying click action
       - waiting 500ms

    at /Users/thomasdowuona-hyde/AIRWAVE_0525_CODEX/tests/e2e/asset-upload.test.ts:25:23
```

# Page snapshot

```yaml
- banner:
  - text: AIrWAVE Dashboard
  - button "Select Client"
  - button "T"
- navigation "navigation menu":
  - text: AIrWAVE
  - separator
  - list:
    - listitem:
      - button "Dashboard"
    - listitem:
      - button "Clients"
    - listitem:
      - button "Campaigns"
    - separator
    - listitem:
      - button "Assets"
    - listitem:
      - button "Matrix"
    - listitem:
      - button "Templates"
    - listitem:
      - button "Strategic Content"
    - separator
    - listitem:
      - button "Generate"
    - listitem:
      - button "Execute"
    - listitem:
      - button "Preview"
    - listitem:
      - button "Sign Off"
- main:
  - heading "Asset Library" [level=4]
  - tablist:
    - tab "All Assets" [selected]
    - tab "Images"
    - tab "Videos"
    - tab "Audio"
  - heading "IMAGE" [level=6]
  - heading "Sample Image 1" [level=6]
  - paragraph: image
  - heading "IMAGE" [level=6]
  - heading "Sample Image 2" [level=6]
  - paragraph: image
  - heading "VIDEO" [level=6]
  - heading "Sample Video 1" [level=6]
  - paragraph: video
  - button "Add asset"
  - menu:
    - menuitem "Upload Files"
    - menuitem "AI Generate"
- button "Open Tanstack query devtools":
  - img
- alert
- button "Open Next.js Dev Tools":
  - img
- button "Open issues overlay": 1 Issue
- button "Collapse issues badge":
  - img
- navigation:
  - button "previous" [disabled]:
    - img "previous"
  - text: 1/1
  - button "next" [disabled]:
    - img "next"
- img
- link "Next.js 15.3.2 (stale) Webpack":
  - /url: https://nextjs.org/docs/messages/version-staleness
  - img
  - text: Next.js 15.3.2 (stale) Webpack
- img
- dialog "Runtime Error":
  - text: Runtime Error
  - button "Copy Stack Trace":
    - img
  - button "No related documentation found" [disabled]:
    - img
  - link "Learn more about enabling Node.js inspector for server code with Chrome DevTools":
    - /url: https://nextjs.org/docs/app/building-your-application/configuring/debugging#server-side-code
    - img
  - paragraph: "SyntaxError: Unexpected token '<', \"<!DOCTYPE \"... is not valid JSON"
```

# Test source

```ts
   1 | import { test, expect } from './fixtures/test-fixtures';
   2 | import path from 'path';
   3 |
   4 | test.describe('Asset Upload Flow', () => {
   5 |   test('should upload image assets successfully', async ({ authenticatedPage, authHelper }) => {
   6 |     // Navigate to assets page
   7 |     await authenticatedPage.goto('/assets');
   8 |     await authenticatedPage.waitForLoadState('networkidle');
   9 |     
   10 |     // Take screenshot of assets page
   11 |     await authenticatedPage.screenshot({ path: 'test-results/assets-page.png' });
   12 |     
   13 |     // Look for upload button or speed dial
   14 |     const uploadButton = authenticatedPage.locator('[data-testid="upload-button"]');
   15 |     const speedDial = authenticatedPage.locator('[data-testid="speed-dial"]');
   16 |     const addButton = authenticatedPage.locator('button:has-text("Upload")');
   17 |     
   18 |     // Try different ways to trigger upload modal
   19 |     let uploadTriggered = false;
   20 |     
   21 |     if (await uploadButton.isVisible()) {
   22 |       await uploadButton.click();
   23 |       uploadTriggered = true;
   24 |     } else if (await speedDial.isVisible()) {
>  25 |       await speedDial.click();
      |                       ^ TimeoutError: locator.click: Timeout 30000ms exceeded.
   26 |       // Look for upload action in speed dial
   27 |       const uploadAction = authenticatedPage.locator('[data-testid="upload-action"]');
   28 |       if (await uploadAction.isVisible()) {
   29 |         await uploadAction.click();
   30 |         uploadTriggered = true;
   31 |       }
   32 |     } else if (await addButton.isVisible()) {
   33 |       await addButton.click();
   34 |       uploadTriggered = true;
   35 |     } else {
   36 |       // Look for any button with upload-related text
   37 |       const buttons = authenticatedPage.locator('button');
   38 |       const buttonCount = await buttons.count();
   39 |       
   40 |       for (let i = 0; i < buttonCount; i++) {
   41 |         const button = buttons.nth(i);
   42 |         const text = await button.textContent();
   43 |         if (text && (text.toLowerCase().includes('upload') || text.toLowerCase().includes('add'))) {
   44 |           await button.click();
   45 |           uploadTriggered = true;
   46 |           break;
   47 |         }
   48 |       }
   49 |     }
   50 |     
   51 |     if (!uploadTriggered) {
   52 |       throw new Error('Could not find upload trigger on assets page');
   53 |     }
   54 |     
   55 |     // Wait for upload modal to appear
   56 |     await authenticatedPage.waitForSelector('[role="dialog"]', { timeout: 5000 });
   57 |     
   58 |     // Take screenshot of upload modal
   59 |     await authenticatedPage.screenshot({ path: 'test-results/upload-modal.png' });
   60 |     
   61 |     // Create a test image file
   62 |     const testImagePath = path.join(__dirname, '../fixtures/test-image.png');
   63 |     
   64 |     // Try to find file input
   65 |     const fileInput = authenticatedPage.locator('input[type="file"]');
   66 |     
   67 |     if (await fileInput.isVisible()) {
   68 |       await fileInput.setInputFiles(testImagePath);
   69 |     } else {
   70 |       // Look for dropzone
   71 |       const dropzone = authenticatedPage.locator('[data-testid="dropzone"]');
   72 |       if (await dropzone.isVisible()) {
   73 |         await dropzone.setInputFiles(testImagePath);
   74 |       } else {
   75 |         // Try to find any element that accepts file drops
   76 |         const uploadArea = authenticatedPage.locator('.dropzone, [data-upload], [data-drop]').first();
   77 |         if (await uploadArea.isVisible()) {
   78 |           await uploadArea.setInputFiles(testImagePath);
   79 |         }
   80 |       }
   81 |     }
   82 |     
   83 |     // Wait for file to be processed
   84 |     await authenticatedPage.waitForTimeout(2000);
   85 |     
   86 |     // Take screenshot showing file selected
   87 |     await authenticatedPage.screenshot({ path: 'test-results/file-selected.png' });
   88 |     
   89 |     // Look for upload confirmation button
   90 |     const confirmButton = authenticatedPage.locator('button:has-text("Upload")');
   91 |     const submitButton = authenticatedPage.locator('button[type="submit"]');
   92 |     const saveButton = authenticatedPage.locator('button:has-text("Save")');
   93 |     
   94 |     if (await confirmButton.isVisible()) {
   95 |       await confirmButton.click();
   96 |     } else if (await submitButton.isVisible()) {
   97 |       await submitButton.click();
   98 |     } else if (await saveButton.isVisible()) {
   99 |       await saveButton.click();
  100 |     }
  101 |     
  102 |     // Wait for upload to complete
  103 |     await authenticatedPage.waitForLoadState('networkidle');
  104 |     
  105 |     // Take final screenshot
  106 |     await authenticatedPage.screenshot({ path: 'test-results/upload-complete.png' });
  107 |     
  108 |     // Verify upload was successful (look for success message or new asset)
  109 |     const successMessage = authenticatedPage.locator('[data-testid="success-message"]');
  110 |     const alertSuccess = authenticatedPage.locator('.MuiAlert-standardSuccess');
  111 |     
  112 |     if (await successMessage.isVisible() || await alertSuccess.isVisible()) {
  113 |       // Success message found
  114 |       expect(true).toBe(true);
  115 |     } else {
  116 |       // Check if modal closed (indicating success)
  117 |       const modal = authenticatedPage.locator('[role="dialog"]');
  118 |       await expect(modal).not.toBeVisible();
  119 |     }
  120 |   });
  121 |
  122 |   test('should handle multiple file upload', async ({ authenticatedPage, authHelper }) => {
  123 |     await authenticatedPage.goto('/assets');
  124 |     await authenticatedPage.waitForLoadState('networkidle');
  125 |     
```